<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Simulador Externo Aura</title>
</head>
<body>
    <div id="lightning-container"></div>

    <script src="https://creative-otter-3dbvzj-dev-ed.trailblaze.my.site.com/portalaura/lightning/lightning.out.js"></script>

    <script>
        const siteUrl = 'https://creative-otter-3dbvzj-dev-ed.trailblaze.my.site.com/portalaura';
        const urlParams = new URLSearchParams(window.location.search);
        const tokenValue = urlParams.get('token');
        const emailValue = urlParams.get('email');
        
        $Lightning.use(
            "c:GuestOutApp", 
            function() {
                $Lightning.createComponent(
                    "lightning:flow", 
                    {}, 
                    "lightning-container",
                    function(component) {
                        const inputVariables = [
                            { 
                                name: 'recordId',
                                type: 'String', 
                                value: tokenValue 
                            },
                            { 
                                name: 'email', 
                                type: 'String', 
                                value: emailValue 
                            }
                        ];

                        component.startFlow("Atualizar_Contato_Flow", inputVariables);
                    }
                );
            },
            siteUrl
        );
    </script>
</body>
</html>
